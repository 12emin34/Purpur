From 016a5545530488fc4724c391c39216d038c75848 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <blake.galbreath@gmail.com>
Date: Sat, 7 Sep 2019 22:47:59 -0500
Subject: [PATCH] Add option for boats to eject players on land

---
 src/main/java/net/minecraft/server/EntityBoat.java   | 1 +
 src/main/java/net/pl3x/purpur/PurpurWorldConfig.java | 5 +++++
 2 files changed, 6 insertions(+)

diff --git a/src/main/java/net/minecraft/server/EntityBoat.java b/src/main/java/net/minecraft/server/EntityBoat.java
index b5bcd1f80..37a98eba6 100644
--- a/src/main/java/net/minecraft/server/EntityBoat.java
+++ b/src/main/java/net/minecraft/server/EntityBoat.java
@@ -425,6 +425,7 @@ public class EntityBoat extends Entity {
 
             if (f > 0.0F) {
                 this.aH = f;
+                if (world.purpurConfig.boatEjectPlayersOnLand) ejectPassengers(); // Purpur
                 return EntityBoat.EnumStatus.ON_LAND;
             } else {
                 return EntityBoat.EnumStatus.IN_AIR;
diff --git a/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java b/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
index 3ff5dc4a3..f68744460 100644
--- a/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
+++ b/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
@@ -74,6 +74,11 @@ public class PurpurWorldConfig {
         bambooSmallHeight = getInt("bamboo.small-height", bambooSmallHeight);
     }
 
+    public boolean boatEjectPlayersOnLand = false;
+    private void boatEjectPlayersOnLand() {
+        boatEjectPlayersOnLand = getBoolean("boat-eject-players-on-land", boatEjectPlayersOnLand);
+    }
+
     public boolean campfireObeysGravity = true;
     private void campfireObeysGravity() {
         campfireObeysGravity = getBoolean("campfire-obeys-gravity", campfireObeysGravity);
-- 
2.23.0.rc1

