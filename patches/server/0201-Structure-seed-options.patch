From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <blake.galbreath@gmail.com>
Date: Thu, 1 Jul 2021 19:25:05 -0500
Subject: [PATCH] Structure seed options


diff --git a/src/main/java/co/aikar/timings/MinecraftTimings.java b/src/main/java/co/aikar/timings/MinecraftTimings.java
index 8f109e667f09d58f6bc7ce1a8b44e8e70d191579..b5482024a0430582d4e9ee4995b508aa4a4a7605 100644
--- a/src/main/java/co/aikar/timings/MinecraftTimings.java
+++ b/src/main/java/co/aikar/timings/MinecraftTimings.java
@@ -171,7 +171,7 @@ public final class MinecraftTimings {
         if (!config.hiddenConfigEntries.contains("proxies.velocity.secret")) {
             config.hiddenConfigEntries.add("proxies.velocity.secret");
         }
-        TimingsManager.hiddenConfigs = config.hiddenConfigEntries;
+        TimingsManager.hiddenConfigs.addAll(config.hiddenConfigEntries); // Purpur
         co.aikar.timings.Timings.setVerboseTimingsEnabled(config.verbose);
         co.aikar.timings.Timings.setTimingsEnabled(config.enabled);
         co.aikar.timings.Timings.setHistoryInterval(config.historyInterval * 20);
diff --git a/src/main/java/org/purpurmc/purpur/PurpurConfig.java b/src/main/java/org/purpurmc/purpur/PurpurConfig.java
index 12c8cd424668c2167c071b48d0c1f689ca363513..b2604ae34c141ce69b3e1df72543aa942a9c9f0e 100644
--- a/src/main/java/org/purpurmc/purpur/PurpurConfig.java
+++ b/src/main/java/org/purpurmc/purpur/PurpurConfig.java
@@ -212,6 +212,23 @@ public class PurpurConfig {
         deathMessageOnlyBroadcastToAffectedPlayer = getBoolean("settings.broadcasts.death.only-broadcast-to-affected-player", deathMessageOnlyBroadcastToAffectedPlayer);
     }
 
+    public static int seedStructureBuriedTreasure = -1;
+    public static int seedStructureMineshaft = -1;
+    private static void seedSettings() {
+        seedStructureBuriedTreasure = getInt("settings.seed.structure.buried_treasure", seedStructureBuriedTreasure);
+        seedStructureMineshaft = getInt("settings.seed.structure.mineshaft", seedStructureMineshaft);
+        if (version < 26) {
+            int stronghold = getInt("settings.seed.structure.stronghold", -1);
+            set("settings.seed.structure.stronghold", null);
+            if (stronghold != -1) {
+                org.spigotmc.SpigotConfig.config.set("world-settings.default.seed-stronghold", stronghold);
+                org.spigotmc.SpigotConfig.save();
+            }
+        }
+        // hide these from timings report
+        if (!TimingsManager.hiddenConfigs.contains("settings.seed")) TimingsManager.hiddenConfigs.add("settings.seed");
+    }
+
     public static String serverModName = "Purpur";
     private static void serverModName() {
         serverModName = getString("settings.server-mod-name", serverModName);
