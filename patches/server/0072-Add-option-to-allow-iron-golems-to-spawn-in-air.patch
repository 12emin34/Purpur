From f0945bbb3cf177d701b1e25542fab02d4c516d23 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <blake.galbreath@gmail.com>
Date: Sat, 19 Oct 2019 02:20:45 -0500
Subject: [PATCH] Add option to allow iron golems to spawn in air

---
 src/main/java/net/minecraft/server/EntityIronGolem.java | 2 +-
 src/main/java/net/pl3x/purpur/PurpurWorldConfig.java    | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/main/java/net/minecraft/server/EntityIronGolem.java b/src/main/java/net/minecraft/server/EntityIronGolem.java
index 5414d6975f..91011dd0aa 100644
--- a/src/main/java/net/minecraft/server/EntityIronGolem.java
+++ b/src/main/java/net/minecraft/server/EntityIronGolem.java
@@ -241,7 +241,7 @@ public class EntityIronGolem extends EntityGolem {
         BlockPosition blockposition1 = blockposition.down();
         IBlockData iblockdata = iworldreader.getType(blockposition1);
 
-        if (!iblockdata.a((IBlockAccess) iworldreader, blockposition1, (Entity) this)) {
+        if (!iblockdata.a((IBlockAccess) iworldreader, blockposition1, (Entity) this) && !iworldreader.getWorldProvider().getWorld().purpurConfig.ironGolemCanSpawnInAir) { // Purpur
             return false;
         } else {
             for (int i = 1; i < 3; ++i) {
diff --git a/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java b/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
index a8e59d3372..1a43f84bfa 100644
--- a/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
+++ b/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
@@ -472,11 +472,13 @@ public class PurpurWorldConfig {
     public boolean ironGolemRidable = false;
     public boolean ironGolemRidableInWater = false;
     public boolean ironGolemRequireShiftToMount = true;
+    public boolean ironGolemCanSpawnInAir = false;
     public boolean ironGolemCanSwim = false;
     private void ironGolemSettings() {
         ironGolemRidable = getBoolean("mobs.iron_golem.ridable", ironGolemRidable);
         ironGolemRidableInWater = getBoolean("mobs.iron_golem.ridable-in-water", ironGolemRidableInWater);
         ironGolemRequireShiftToMount = getBoolean("mobs.iron_golem.require-shift-to-mount", ironGolemRequireShiftToMount);
+        ironGolemCanSpawnInAir = getBoolean("mobs.iron_golem.can-spawn-in-air", ironGolemCanSpawnInAir);
         ironGolemCanSwim = getBoolean("mobs.iron_golem.can-swim", ironGolemCanSwim);
     }
 
-- 
2.24.0

