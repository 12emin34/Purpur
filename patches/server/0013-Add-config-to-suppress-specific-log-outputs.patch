From b7792aa787f7a551ea71db7ea3f9e6b147c50b7d Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <blake.galbreath@gmail.com>
Date: Fri, 10 May 2019 19:17:36 -0500
Subject: [PATCH] Add config to suppress specific log outputs

---
 src/main/java/net/minecraft/server/GenericAttributes.java | 1 +
 src/main/java/net/minecraft/server/WorldServer.java       | 7 ++-----
 src/main/java/net/pl3x/purpur/PurpurConfig.java           | 7 +++++++
 3 files changed, 10 insertions(+), 5 deletions(-)

diff --git a/src/main/java/net/minecraft/server/GenericAttributes.java b/src/main/java/net/minecraft/server/GenericAttributes.java
index 908f11f98..20c3b37d3 100644
--- a/src/main/java/net/minecraft/server/GenericAttributes.java
+++ b/src/main/java/net/minecraft/server/GenericAttributes.java
@@ -79,6 +79,7 @@ public class GenericAttributes {
             AttributeInstance attributeinstance = attributemapbase.a(nbttagcompound.getString("Name"));
 
             if (attributeinstance == null) {
+                if (net.pl3x.purpur.PurpurConfig.showUnknownAttributeWarnings) // Purpur
                 GenericAttributes.LOGGER.warn("Ignoring unknown attribute '{}'", nbttagcompound.getString("Name"));
             } else {
                 a(attributeinstance, nbttagcompound);
diff --git a/src/main/java/net/minecraft/server/WorldServer.java b/src/main/java/net/minecraft/server/WorldServer.java
index 03da9b3f2..f51d8389b 100644
--- a/src/main/java/net/minecraft/server/WorldServer.java
+++ b/src/main/java/net/minecraft/server/WorldServer.java
@@ -1,7 +1,6 @@
 package net.minecraft.server;
 
 import co.aikar.timings.TimingHistory;
-import co.aikar.timings.Timings;
 import com.google.common.collect.Lists;
 import com.google.common.collect.Maps;
 import com.google.common.collect.Queues;
@@ -34,15 +33,11 @@ import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 
 // CraftBukkit start
-import java.util.logging.Level;
 import org.bukkit.Bukkit;
 
 import org.bukkit.WeatherType;
-import org.bukkit.block.BlockState;
 import org.bukkit.craftbukkit.event.CraftEventFactory;
-import org.bukkit.craftbukkit.util.HashTreeSet;
 
-import org.bukkit.event.block.BlockFormEvent;
 import org.bukkit.event.entity.CreatureSpawnEvent;
 import org.bukkit.event.server.MapInitializeEvent;
 import org.bukkit.event.weather.LightningStrikeEvent;
@@ -984,8 +979,10 @@ public class WorldServer extends World {
         if (entity1 == null) {
             return false;
         } else {
+            if (net.pl3x.purpur.PurpurConfig.showDuplicateEntityUUIDErrors) { // Purpur
             WorldServer.LOGGER.error("Keeping entity {} that already exists with UUID {}", EntityTypes.getName(entity1.getEntityType()), entity.getUniqueID().toString()); // CraftBukkit // paper
             WorldServer.LOGGER.error("Deleting duplicate entity {}", entity); // CraftBukkit // paper
+            } // Purpur
             return true;
         }
     }
diff --git a/src/main/java/net/pl3x/purpur/PurpurConfig.java b/src/main/java/net/pl3x/purpur/PurpurConfig.java
index 28f80e1a5..d75580ce6 100644
--- a/src/main/java/net/pl3x/purpur/PurpurConfig.java
+++ b/src/main/java/net/pl3x/purpur/PurpurConfig.java
@@ -98,4 +98,11 @@ public class PurpurConfig {
         config.addDefault(path, def);
         return config.getString(path, config.getString(path));
     }
+
+    public static boolean showDuplicateEntityUUIDErrors = true;
+    public static boolean showUnknownAttributeWarnings = true;
+    private static void loggerSettings() {
+        showDuplicateEntityUUIDErrors = getBoolean("settings.logger.show-duplicate-entity-uuid-errors", showDuplicateEntityUUIDErrors);
+        showUnknownAttributeWarnings = getBoolean("settings.logger.show-unknown-attribute-warnings", showUnknownAttributeWarnings);
+    }
 }
-- 
2.20.1

