From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <Blake.Galbreath@GMail.com>
Date: Wed, 19 Aug 2020 19:05:27 -0500
Subject: [PATCH] Fix end portal platform


diff --git a/src/main/java/net/minecraft/server/EntityPlayer.java b/src/main/java/net/minecraft/server/EntityPlayer.java
index 85e77a61fe..1641d81d25 100644
--- a/src/main/java/net/minecraft/server/EntityPlayer.java
+++ b/src/main/java/net/minecraft/server/EntityPlayer.java
@@ -1023,6 +1023,7 @@ public class EntityPlayer extends EntityHuman implements ICrafting {
         if (event.isCancelled() || event.getTo() == null || event.getTo().getWorld() == null) {
             return null;
         }
+        if (exitWorldServer.getTypeKey() == DimensionManager.THE_END && event.getCanCreatePortal()) WorldServer.rebuildPortalPlatform(exitWorldServer, this); // Purpur
         return new CraftPortalEvent(event);
     }
     // CraftBukkit end
diff --git a/src/main/java/net/minecraft/server/WorldServer.java b/src/main/java/net/minecraft/server/WorldServer.java
index 61e09bd8f4..b732ec2771 100644
--- a/src/main/java/net/minecraft/server/WorldServer.java
+++ b/src/main/java/net/minecraft/server/WorldServer.java
@@ -2799,6 +2799,7 @@ public class WorldServer extends World implements GeneratorAccessSeed {
         WorldServer.a(worldserver, null);
     }
 
+    public static void rebuildPortalPlatform(WorldServer worldserver, Entity entity) { a(worldserver, entity); } // Purpur - OBFHELPER
     public static void a(WorldServer worldserver, Entity entity) {
         // CraftBukkit end
         BlockPosition blockposition = WorldServer.a;
