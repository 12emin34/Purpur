From 0dfdfd6131c8ce51cb3d7ca41ec3069c77b3ad10 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <blake.galbreath@gmail.com>
Date: Sun, 12 May 2019 01:14:46 -0500
Subject: [PATCH] Pigs give saddle back

---
 src/main/java/net/minecraft/server/EntityPig.java | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/src/main/java/net/minecraft/server/EntityPig.java b/src/main/java/net/minecraft/server/EntityPig.java
index fd57e5bde..e1e43cebf 100644
--- a/src/main/java/net/minecraft/server/EntityPig.java
+++ b/src/main/java/net/minecraft/server/EntityPig.java
@@ -119,10 +119,20 @@ public class EntityPig extends EntityAnimal {
             return true;
         }
         if (hasSaddle() && !isVehicle()) {
+            if (entityhuman.isSneaking()) {
+                setSaddle(false);
+                if (!entityhuman.abilities.canInstantlyBuild) {
+                    ItemStack saddle = new ItemStack(Items.SADDLE);
+                    if (!entityhuman.inventory.pickup(saddle)) {
+                        entityhuman.drop(saddle, false);
+                    }
+                }
+                return true;
+            }
             entityhuman.startRiding(this);
             return true;
         }
-        if (itemstack.getItem() == Items.SADDLE) {
+        if (itemstack.getItem() == Items.SADDLE && !entityhuman.isSneaking()) {
             itemstack.a(entityhuman, this, enumhand);
             return true;
         }
-- 
2.20.1

