From 5d8f75f465d9985353d919129ed0996a6e042c60 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <blake.galbreath@gmail.com>
Date: Sat, 19 Oct 2019 00:34:43 -0500
Subject: [PATCH] Add getPlacementBlockData to World

---
 src/main/java/org/bukkit/craftbukkit/CraftWorld.java | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/src/main/java/org/bukkit/craftbukkit/CraftWorld.java b/src/main/java/org/bukkit/craftbukkit/CraftWorld.java
index ac7e16cdcc..d4db567205 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftWorld.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftWorld.java
@@ -2366,6 +2366,11 @@ public class CraftWorld implements World {
     public void setFluidTickEventEnabled(boolean enabled) {
         getHandle().purpurConfig.fluidTickEvent = enabled;
     }
+
+    public BlockData getPlacementBlockData(BlockData blockdata, Location location) {
+        IBlockData validData = net.minecraft.server.Block.getValidBlockForPosition(((CraftBlockData) blockdata).getState(), getHandle(), net.minecraft.server.MCUtil.toBlockPosition(location));
+        return CraftBlockData.fromData(validData == null ? Blocks.AIR.getBlockData() : validData);
+    }
     // Purpur end
 
     // Paper start
-- 
2.24.0.rc1

