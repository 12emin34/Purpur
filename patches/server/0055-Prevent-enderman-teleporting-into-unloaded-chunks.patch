From 3aa92d8e98f4ef431ad18fe137bbdd01f4a2f970 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <blake.galbreath@gmail.com>
Date: Sat, 13 Jul 2019 18:41:37 -0500
Subject: [PATCH] Prevent enderman teleporting into unloaded chunks

---
 src/main/java/net/minecraft/server/EntityEnderman.java | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/main/java/net/minecraft/server/EntityEnderman.java b/src/main/java/net/minecraft/server/EntityEnderman.java
index f551192a04..eb07bbcd9e 100644
--- a/src/main/java/net/minecraft/server/EntityEnderman.java
+++ b/src/main/java/net/minecraft/server/EntityEnderman.java
@@ -222,6 +222,7 @@ public class EntityEnderman extends EntityMonster {
 
     private boolean l(double d0, double d1, double d2) {
         BlockPosition.MutableBlockPosition blockposition_mutableblockposition = new BlockPosition.MutableBlockPosition(d0, d1, d2);
+        if (!world.isLoaded(blockposition_mutableblockposition)) return false; // Purpur
 
         while (blockposition_mutableblockposition.getY() > 0 && !this.world.getType(blockposition_mutableblockposition).getMaterial().isSolid()) {
             blockposition_mutableblockposition.c(EnumDirection.DOWN);
-- 
2.20.1

