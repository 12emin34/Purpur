From 8306390fb9aa91c6d9ab57b7e4cd78b7207bb070 Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <Blake.Galbreath@GMail.com>
Date: Thu, 2 Jan 2020 11:31:36 -0600
Subject: [PATCH] Make lava flow speed configurable

---
 src/main/java/net/minecraft/server/FluidTypeLava.java | 5 ++++-
 src/main/java/net/minecraft/server/WorldProvider.java | 1 +
 src/main/java/net/pl3x/purpur/PurpurWorldConfig.java  | 6 +++++-
 3 files changed, 10 insertions(+), 2 deletions(-)

diff --git a/src/main/java/net/minecraft/server/FluidTypeLava.java b/src/main/java/net/minecraft/server/FluidTypeLava.java
index 09f82c2d9..360470142 100644
--- a/src/main/java/net/minecraft/server/FluidTypeLava.java
+++ b/src/main/java/net/minecraft/server/FluidTypeLava.java
@@ -129,7 +129,10 @@ public abstract class FluidTypeLava extends FluidTypeFlowing {
 
     @Override
     public int a(IWorldReader iworldreader) {
-        return iworldreader.getWorldProvider().g() ? 10 : 30;
+        // Purpur start
+        net.pl3x.purpur.PurpurWorldConfig config = iworldreader.getWorldProvider().getWorld().purpurConfig;
+        return iworldreader.getWorldProvider().isHell() ? config.lavaSpeedNether : config.lavaSpeedNotNether;
+        // Purpur end
     }
 
     @Override
diff --git a/src/main/java/net/minecraft/server/WorldProvider.java b/src/main/java/net/minecraft/server/WorldProvider.java
index 39252e687..75f8441ab 100644
--- a/src/main/java/net/minecraft/server/WorldProvider.java
+++ b/src/main/java/net/minecraft/server/WorldProvider.java
@@ -42,6 +42,7 @@ public abstract class WorldProvider {
         return this.f.hasSkyLight();
     }
 
+    public boolean isHell() { return g(); } // Purpur - OBFHELPER
     public boolean g() {
         return this.d;
     }
diff --git a/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java b/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
index 915b3beb2..a49ccf289 100644
--- a/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
+++ b/src/main/java/net/pl3x/purpur/PurpurWorldConfig.java
@@ -161,8 +161,12 @@ public class PurpurWorldConfig {
     }
 
     public boolean lavaInfinite = false;
+    public int lavaSpeedNether = 10;
+    public int lavaSpeedNotNether = 30;
     private void lavaSettings() {
-        lavaInfinite = getBoolean("settings.lava-flow.infinite", lavaInfinite);
+        lavaInfinite = getBoolean("lava-flow.infinite", lavaInfinite);
+        lavaSpeedNether = getInt("lava-flow.speed.nether", lavaSpeedNether);
+        lavaSpeedNotNether = getInt("lava-flow.speed.not-nether", lavaSpeedNotNether);
     }
 
     public int elytraDamagePerSecond = 1;
-- 
2.24.0

