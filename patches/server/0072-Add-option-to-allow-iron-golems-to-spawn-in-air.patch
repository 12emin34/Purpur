From bd25f55b2b0d9689844b8cc6f6b33718ed8dfefb Mon Sep 17 00:00:00 2001
From: William Blake Galbreath <blake.galbreath@gmail.com>
Date: Sat, 19 Oct 2019 02:20:45 -0500
Subject: [PATCH] Add option to allow iron golems to spawn in air

---
 src/main/java/net/minecraft/server/EntityIronGolem.java | 2 +-
 src/main/java/net/pl3x/purpur/PurpurConfig.java         | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/main/java/net/minecraft/server/EntityIronGolem.java b/src/main/java/net/minecraft/server/EntityIronGolem.java
index dbdc200ec3..314cb7fcfe 100644
--- a/src/main/java/net/minecraft/server/EntityIronGolem.java
+++ b/src/main/java/net/minecraft/server/EntityIronGolem.java
@@ -224,7 +224,7 @@ public class EntityIronGolem extends EntityGolem {
         BlockPosition blockposition1 = blockposition.down();
         IBlockData iblockdata = iworldreader.getType(blockposition1);
 
-        if (!iblockdata.a((IBlockAccess) iworldreader, blockposition1, (Entity) this)) {
+        if (!iblockdata.a((IBlockAccess) iworldreader, blockposition1, (Entity) this) && !net.pl3x.purpur.PurpurConfig.ironGolemsCanSpawnInAir) { // Purpur
             return false;
         } else {
             for (int i = 1; i < 3; ++i) {
diff --git a/src/main/java/net/pl3x/purpur/PurpurConfig.java b/src/main/java/net/pl3x/purpur/PurpurConfig.java
index 7e06cd044e..148fc22ff7 100644
--- a/src/main/java/net/pl3x/purpur/PurpurConfig.java
+++ b/src/main/java/net/pl3x/purpur/PurpurConfig.java
@@ -221,8 +221,10 @@ public class PurpurConfig {
     }
 
     public static boolean ironGolemSwims = true;
+    public static boolean ironGolemsCanSpawnInAir = false;
     private static void ironGolemSettings() {
         ironGolemSwims = getBoolean("settings.mobs.iron_golem.swims", ironGolemSwims);
+        ironGolemsCanSpawnInAir = getBoolean("settings.mobs.iron_golem.can-spawn-in-air", ironGolemsCanSpawnInAir);
     }
 
     public static double crystalsAttackPhantomsRadius = 0.0D;
-- 
2.24.0

