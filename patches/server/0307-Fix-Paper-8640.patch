From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: BillyGalbreath <blake.galbreath@gmail.com>
Date: Thu, 15 Dec 2022 02:03:38 -0600
Subject: [PATCH] Fix Paper#8640


diff --git a/src/main/java/net/minecraft/network/protocol/game/ClientboundSetTimePacket.java b/src/main/java/net/minecraft/network/protocol/game/ClientboundSetTimePacket.java
index fa3c960992cc240161817e54659d83fed259f2fe..b9c24f56b4ec36c07f188b6c406186684a2b3f4f 100644
--- a/src/main/java/net/minecraft/network/protocol/game/ClientboundSetTimePacket.java
+++ b/src/main/java/net/minecraft/network/protocol/game/ClientboundSetTimePacket.java
@@ -8,7 +8,7 @@ public class ClientboundSetTimePacket implements Packet<ClientGamePacketListener
     private long dayTime; public void setDayTime(long dayTime) { this.dayTime = dayTime; } // Purpur
 
     public ClientboundSetTimePacket(long time, long timeOfDay, boolean doDaylightCycle) {
-        this.gameTime = time % 192000; // Paper - fix guardian beam
+        this.gameTime = time % 192000; // Paper - fix guardian beam // Purpur - diff on change
         long l = timeOfDay;
         if (!doDaylightCycle) {
             l = -timeOfDay;
diff --git a/src/main/java/net/minecraft/world/entity/animal/camel/Camel.java b/src/main/java/net/minecraft/world/entity/animal/camel/Camel.java
index f9d77ad2493b9ba67e8f45ce248d29a8e9ab7b80..be6a6617e5312601c25c1bf3dce3f577c19437b9 100644
--- a/src/main/java/net/minecraft/world/entity/animal/camel/Camel.java
+++ b/src/main/java/net/minecraft/world/entity/animal/camel/Camel.java
@@ -590,7 +590,7 @@ public class Camel extends AbstractHorse implements PlayerRideableJumping, Rider
 
     @VisibleForTesting
     public void resetLastPoseChangeTick(long lastPoseTick) {
-        this.entityData.set(LAST_POSE_CHANGE_TICK, lastPoseTick);
+        this.entityData.set(LAST_POSE_CHANGE_TICK, lastPoseTick % 192000); // Purpur - paper alter's client time in Paper#8630, last pose tick must match
     }
 
     public long getPoseTime() {
